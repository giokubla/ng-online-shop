<nz-layout>
  <nz-header>
    <ul
      nz-menu
      nzTheme="dark"
      nz-flex
      nzJustify="space-between"
      nzMode="horizontal"
    >
      <li (click)="getProducts()" nz-menu-item>all</li>
      @for (item of productBrands(); track $index) {
        <li (click)="getProductsByBrand(item)" nz-menu-item>{{ item }}</li>
      }
    </ul>
  </nz-header>
  <nz-content>
    <div class="second-nav" nz-flex nzJustify="space-between">
      <nz-button-group>
        @for (item of productCategories(); track $index) {
          <button
            (click)="getProductsByCategory(item.id)"
            nz-button
            nzType="primary"
          >
            {{ item.name }}
            <img class="category-img" [src]="item.image" alt="" />
          </button>
        }
      </nz-button-group>
      <nz-pagination
        (nzPageSizeChange)="onPageSizeChange($event)"
        (nzPageIndexChange)="onPageIndexChange($event)"
        [nzPageIndex]="pageIndex()"
        [nzTotal]="totalProducts()"
        nzShowSizeChanger
        [nzPageSize]="productsLengthOnPage()"
      ></nz-pagination>
    </div>
    <div class="inner-content" nz-flex nzJustify="space-around" nzWrap="wrap">
      @for (item of products(); track $index) {
        <div [routerLink]="['/product-details', item._id]">
          <nz-card nzHoverable style="width: 240px" [nzCover]="coverTemplate">
            <nz-card-meta
              [nzTitle]="item.title"
              [nzDescription]="item.description"
            ></nz-card-meta>
            <p>{{ item.price.current }}</p>
          </nz-card>
          <ng-template #coverTemplate>
            <img alt="example" [src]="item.images[0]" />
          </ng-template>
        </div>
      }
    </div>
  </nz-content>
</nz-layout>
